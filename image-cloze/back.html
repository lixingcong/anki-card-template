<div>{{title}}</div>

<div class="float-right" id="adjust-height">
    <label class="clickable-label" onclick="adjustDivHeight(true)">▼</label>
    <label class="clickable-label" onclick="adjustDivHeight(false)">▲</label>
</div>

<div class="div-outside" id="div-outside">
    <div class="div-inside">
        <img id="image" class="covered-image" src="{{image}}"></img>
        <canvas id="canvas" class="covering-canvas"></canvas>
    </div>
</div>

{{#notes}}
<div id="notes">{{notes}}</div>
{{/notes}}

<div id="tags" class="tags"></div>

<code class="invisible" id="original-tags">{{Tags}}</code>

<script type="text/javascript">
    if (typeof (cs) == "undefined") {
        var cs = new CardStorageImageCloze()
    }

    if (is_mobile && Persistence.isAvailable()) {
        const csObject = Persistence.getItem()
        Object.assign(cs, csObject)
    }

    if(!is_mobile)
        document.getElementById('adjust-height').remove()

    cs.setAllowHit(false)

    var image = document.getElementById('image')
    var divResizable = document.getElementById('div-outside')

    var divHeight = Persistence.getItem(StoreKeyDivHeight)
    if(undefined == divHeight)
        divResizable.style.height = DefaultDivHeight
    else
        divResizable.style.height = divHeight

    show_tags(takeContent('original-tags'), 'tags', 'tag')

    if(undefined !== keyChecker){
        keyChecker.uninstall()
        keyChecker = undefined
    }

</script>