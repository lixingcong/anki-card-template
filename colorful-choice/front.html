<div class="question">{{id}}.&nbsp;{{question}}<span id="questionType"></span></div>
<div class="options" id="options"></div>

{{#notes}}
<div><li onclick="showNotes(this)" class="show-notes-btn">âŠ™</li></div>
<div id="notes" style="display: none"></div>
{{/notes}}

<div id="tags" class="tags"></div>

<code class="invisible" id="original-options">{{options}}</code>
<code class="invisible" id="original-tags">{{Tags}}</code>
<code class="invisible" id="original-notes">{{#notes}}{{notes}}{{/notes}}</code>

<script type="text/javascript">
    var cs = new CardStorageColorfulChoice()

    cs.build(takeContent('original-options'), '{{answer}}'.trim(), takeContent('original-notes'))

    init_options(true)
    show_tags(takeContent('original-tags'), 'tags', 'tag')
    setInnerHtml('notes', cs.notes)

    if(is_mobile){
        window.onunload = function() {
            if (Persistence.isAvailable())
                Persistence.setItem(cs)
        }
    }

    function showNotes(li){
        document.getElementById('notes').style.display = 'block'
        li.remove()
    }

    if(undefined !== keyChecker)
        keyChecker.uninstall()

    var keyChecker= new EventHistoryTimer(['keydown'], 20)
    keyChecker.install(function(e){
        if(e.ctrlKey && e.altKey && e.key.length == 1){
            const idx = e.key.charCodeAt(0) - 49
            if(idx>=0 && idx<cs.options_text.length)
                toggle(idx)
        }
    })
</script>