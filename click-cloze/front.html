<div id="content-div"></div>

{{#notes}}
<hr>
<div><li onclick="showNotes(this)" class="show-notes-btn">âŠ™</li></div>
<span id="notes" style="display: none">{{notes}}</span>
{{/notes}}

<div id="tags" class="tags"></div>

<code class="invisible" id="original-content">{{content}}</code>

<script type="text/javascript">
    var script = document.createElement('script')
    script.innerHTML = "var cs = new CardStorage();"
    document.head.appendChild(script)

    cs.build(takeContent('original-content'))

    show_result(false)
    show_tags("{{Tags}}")

    if(is_mobile){
        window.onunload = function() {
            if (Persistence.isAvailable())
                Persistence.setItem(cs)
        }
    }

    function showNotes(li){
        document.getElementById('notes').style.display = 'block'
        li.remove()
    }

    var keyPressTimer = undefined
    var keyPressHistory = []

    function keyPressTimeout(){
        for(var e of keyPressHistory){
            if(e.ctrlKey && e.altKey){
                var show = undefined
                if(49==e.keyCode)
                    show = true
                else if(50==e.keyCode)
                    show = false

                if(undefined !== show){
                    showClozeAnswerByStep(show)
                    break
                }
            }
        }

        keyPressTimer = undefined
        keyPressHistory.length = 0
        document.addEventListener('keydown', keyPressHandler, {once: true})
    }

    function keyPressHandler(event) {
        keyPressHistory.unshift(event)
        if (undefined === keyPressTimer)
            keyPressTimer = setTimeout(keyPressTimeout, 10, event)
    }

    keyPressTimeout()
</script>